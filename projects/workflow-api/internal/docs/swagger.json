{
  "swagger": "2.0",
  "info": {
    "description": "Exposes ComfyUI client functions as a RESTful API secured by Google OAuth.",
    "title": "ComfyUI API Service via Gin",
    "termsOfService": "http://swagger.io/terms/",
    "contact": {
      "name": "API Support",
      "url": "http://www.swagger.io/support",
      "email": "support@swagger.io"
    },
    "license": {
      "name": "Apache 2.0",
      "url": "http://www.apache.org/licenses/LICENSE-2.0.html"
    },
    "version": "1.0"
  },
  "host": "localhost:8080",
  "basePath": "/api/v1",
  "paths": {
    "/history/{prompt_id}": {
      "get": {
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "description": "Retrieves the execution history and outputs for a specific prompt ID.",
        "produces": ["application/json"],
        "tags": ["ComfyUI"],
        "summary": "Get prompt history",
        "parameters": [
          {
            "type": "string",
            "format": "uuid",
            "example": "\"a1b2c3d4-e5f6-7890-1234-567890abcdef\"",
            "description": "The ID of the prompt",
            "name": "prompt_id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Prompt history details",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "400": {
            "description": "Bad Request (e.g., missing prompt_id)",
            "schema": {
              "$ref": "#/definitions/api.ErrorResponse"
            }
          },
          "401": {
            "description": "Unauthorized (Invalid or missing Bearer token)",
            "schema": {
              "$ref": "#/definitions/api.ErrorResponse"
            }
          },
          "404": {
            "description": "Not Found (Prompt ID not found in ComfyUI)",
            "schema": {
              "$ref": "#/definitions/api.ErrorResponse"
            }
          },
          "500": {
            "description": "Internal Server Error",
            "schema": {
              "$ref": "#/definitions/api.ErrorResponse"
            }
          }
        }
      }
    },
    "/image": {
      "get": {
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "description": "Downloads a specific image generated by ComfyUI.",
        "produces": [
          "image/png",
          "image/jpeg",
          "image/webp",
          "application/octet-stream"
        ],
        "tags": ["ComfyUI"],
        "summary": "Get generated image",
        "parameters": [
          {
            "type": "string",
            "example": "\"ComfyUI_00001_.png\"",
            "description": "Filename of the image",
            "name": "filename",
            "in": "query",
            "required": true
          },
          {
            "type": "string",
            "example": "\"output\"",
            "description": "Subfolder containing the image (if any)",
            "name": "subfolder",
            "in": "query"
          },
          {
            "enum": ["output", "input", "temp"],
            "type": "string",
            "example": "\"output\"",
            "description": "Type of image (e.g., 'output', 'input', 'temp')",
            "name": "type",
            "in": "query",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "The requested image file",
            "schema": {
              "type": "file"
            }
          },
          "400": {
            "description": "Bad Request (Missing required query parameters)",
            "schema": {
              "$ref": "#/definitions/api.ErrorResponse"
            }
          },
          "401": {
            "description": "Unauthorized",
            "schema": {
              "$ref": "#/definitions/api.ErrorResponse"
            }
          },
          "404": {
            "description": "Not Found (Image not found on ComfyUI server)",
            "schema": {
              "$ref": "#/definitions/api.ErrorResponse"
            }
          },
          "500": {
            "description": "Internal Server Error",
            "schema": {
              "$ref": "#/definitions/api.ErrorResponse"
            }
          }
        }
      }
    },
    "/queue_prompt": {
      "post": {
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "description": "Sends a workflow prompt to the ComfyUI backend for processing. The prompt field is a map where keys are node IDs (strings) and values are objects defining the node's class_type and inputs. Example: `{\"3\": {\"class_type\": \"KSampler\", \"inputs\": {\"seed\": 123}}}`",
        "consumes": ["application/json"],
        "produces": ["application/json"],
        "tags": ["ComfyUI"],
        "summary": "Queue a generation prompt",
        "parameters": [
          {
            "description": "The prompt workflow JSON and client ID",
            "name": "prompt",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/api.QueuePromptRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully queued prompt",
            "schema": {
              "$ref": "#/definitions/comfyui.PromptResponse"
            }
          },
          "400": {
            "description": "Bad Request (e.g., invalid JSON)",
            "schema": {
              "$ref": "#/definitions/api.ErrorResponse"
            }
          },
          "401": {
            "description": "Unauthorized (Invalid or missing Bearer token)",
            "schema": {
              "$ref": "#/definitions/api.ErrorResponse"
            }
          },
          "500": {
            "description": "Internal Server Error (e.g., ComfyUI unreachable)",
            "schema": {
              "$ref": "#/definitions/api.ErrorResponse"
            }
          }
        }
      }
    },
    "/upload_image": {
      "post": {
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "description": "Uploads an image file to the ComfyUI input directory.",
        "consumes": ["multipart/form-data"],
        "produces": ["application/json"],
        "tags": ["ComfyUI"],
        "summary": "Upload an image",
        "parameters": [
          {
            "type": "file",
            "description": "Image file to upload",
            "name": "image",
            "in": "formData",
            "required": true
          },
          {
            "enum": ["input", "temp"],
            "type": "string",
            "example": "\"input\"",
            "description": "Type of upload (usually 'input')",
            "name": "type",
            "in": "formData",
            "required": true
          },
          {
            "type": "boolean",
            "example": false,
            "description": "Overwrite existing file (default: false)",
            "name": "overwrite",
            "in": "formData"
          }
        ],
        "responses": {
          "200": {
            "description": "Image uploaded successfully",
            "schema": {
              "$ref": "#/definitions/comfyui.UploadImageResponse"
            }
          },
          "400": {
            "description": "Bad Request (e.g., missing file or type)",
            "schema": {
              "$ref": "#/definitions/api.ErrorResponse"
            }
          },
          "401": {
            "description": "Unauthorized",
            "schema": {
              "$ref": "#/definitions/api.ErrorResponse"
            }
          },
          "500": {
            "description": "Internal Server Error (e.g., upload failed)",
            "schema": {
              "$ref": "#/definitions/api.ErrorResponse"
            }
          }
        }
      }
    }
  },
  "definitions": {
    "api.ErrorResponse": {
      "type": "object",
      "properties": {
        "details": {
          "type": "string",
          "example": "Optional additional error details"
        },
        "error": {
          "type": "string",
          "example": "A human-readable error message"
        }
      }
    },
    "api.QueuePromptRequest": {
      "type": "object",
      "required": ["prompt"],
      "properties": {
        "prompt": {
          "type": "object",
          "additionalProperties": true
        }
      }
    },
    "comfyui.PromptResponse": {
      "type": "object",
      "properties": {
        "node_errors": {
          "description": "Use omitempty if it can be absent",
          "type": "object",
          "additionalProperties": true
        },
        "number": {
          "type": "integer"
        },
        "prompt_id": {
          "type": "string"
        }
      }
    },
    "comfyui.UploadImageResponse": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "subfolder": {
          "type": "string"
        },
        "type": {
          "type": "string"
        }
      }
    }
  },
  "securityDefinitions": {
    "BearerAuth": {
      "description": "Type \"Bearer\" followed by a space and a valid Google OAuth access token. Example: \"Bearer y29...\"",
      "type": "apiKey",
      "name": "Authorization",
      "in": "header"
    }
  },
  "externalDocs": {
    "description": "OpenAPI",
    "url": "https://swagger.io/resources/open-api/"
  }
}
